<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat.js Çekirdek Sistem Fonksiyon Raporu</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { 
            font-family: 'Inter', sans-serif; 
            background-color: #f0f9ff; /* Light blue background */
        }
        .function-section {
            background-color: #ffffff;
            border-radius: 0.75rem; /* 12px */
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            margin-bottom: 2rem; /* 32px */
            padding: 1.5rem; /* 24px */
            border-left: 4px solid #0ea5e9; /* Sky 500 border */
        }
        .function-title-text {
            color: #0369a1; /* Sky 700 */
            font-weight: 600; /* Semibold */
        }
        .code-block { 
            background-color: #1e293b; /* Slate 800 */
            color: #e2e8f0; /* Slate 200 */
            padding: 1rem; /* 16px */
            border-radius: 0.5rem; /* 8px */
            margin-top: 1rem; /* 16px */
            margin-bottom: 1rem; /* 16px */
            white-space: pre-wrap; 
            font-family: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace;
            font-size: 0.875rem; /* 14px */
            line-height: 1.5; /* Increased line height for readability */
            overflow-x: auto; /* Horizontal scroll for long lines */
        }
        .explanation-summary {
            background-color: #f0f9ff; /* Sky 50 */
            padding: 0.75rem 1rem; /* 12px 16px */
            border-radius: 0.5rem; /* 8px */
            margin-bottom: 0.5rem; /* 8px */
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: #075985; /* Sky 800 */
            font-weight: 500; /* Medium */
            border: 1px solid #bae6fd; /* Sky 200 */
        }
        .explanation-summary:hover {
            background-color: #e0f2fe; /* Sky 100 */
        }
        .explanation-details { 
            margin-left: 1rem; /* 16px */
            padding-left: 1rem; /* 16px */
            border-left: 3px solid #7dd3fc; /* Sky 300 */
            padding-top: 0.5rem; /* 8px */
            padding-bottom: 0.5rem; /* 8px */
            color: #374151; /* Gray 700 */
        }
        .explanation-details p {
            margin-bottom: 0.75rem; /* 12px */
        }
        .explanation-details strong {
            color: #1f2937; /* Gray 800 */
        }
        details > summary { 
            list-style: none; 
        }
        details > summary::-webkit-details-marker { 
            display: none; 
        }
        details > summary::marker { 
            display: none; 
        }
        .chevron::before {
            border-style: solid;
            border-width: 0.15em 0.15em 0 0;
            content: '';
            display: inline-block;
            height: 0.45em;
            left: 0.15em;
            position: relative;
            top: 0.15em;
            transform: rotate(-45deg);
            vertical-align: top;
            width: 0.45em;
            transition: transform 0.2s ease-in-out;
        }
        details[open] > summary .chevron::before {
            transform: rotate(135deg);
        }
        .global-vars {
            background-color: #fefce8; /* Yellow 50 */
            border: 1px solid #fde047; /* Yellow 300 */
            padding: 0.75rem;
            border-radius: 0.375rem;
            margin-bottom: 1rem;
            font-size: 0.9rem;
        }
        .global-vars code {
            background-color: #fef9c3; /* Yellow 100 */
            padding: 0.1rem 0.3rem;
            border-radius: 0.25rem;
            color: #713f12; /* Yellow 800 */
        }
    </style>
</head>
<body class="p-4 md:p-8">
    <div class="max-w-5xl mx-auto bg-white shadow-xl rounded-xl p-6 md:p-8">
        <header class="mb-8 pb-6 border-b border-gray-300">
            <h1 class="text-4xl font-bold text-center text-sky-700"><code>chat.js</code> Çekirdek Sistem Fonksiyon Raporu</h1>
            <p class="text-center text-gray-600 mt-3 text-lg"><code>chat.js</code> dosyasının "Çekirdek Sistem" (Core System) olarak adlandırılan bölümündeki fonksiyonların ve komutlarının detaylı açıklaması.</p>
        </header>

        <section id="core-system-overview" class="mb-10 p-6 bg-sky-50 rounded-lg border border-sky-200">
            <h2 class="text-2xl font-semibold text-sky-600 mb-3">1. Çekirdek Sistem (Core System)</h2>
            <p class="text-gray-700 leading-relaxed">
                Bu bölüm, sohbet modülünün temel altyapısını oluşturan kritik fonksiyonları ve yapıları içerir. 
                Bu yapılar arasında uygulamanın çeşitli yerlerinde kullanılmak üzere loglama mekanizması, 
                uygulamanın genel durumunu (state) yöneten mantık, kullanıcı arayüzü (UI) elemanlarına 
                dinamik erişim sağlayan DOM elemanı başlatıcısı ve tüm bu sistemlerin düzgün bir şekilde 
                çalışmaya başlamasını sağlayan genel başlatma (initialization) rutinleri bulunur.
            </p>
        </section>

        <section class="function-section" id="logging-system">
            <h3 class="text-xl function-title-text mb-3">1.1 Loglama Sistemi (Logging System)</h3>
            <p class="text-gray-600 mb-4">Bu bölüm, geliştirme ve hata ayıklama süreçlerinde yardımcı olmak üzere konsola çeşitli seviyelerde (debug, info, action, warn, error) mesaj yazdırmak için kullanılan fonksiyonu ve ilgili sabitleri içerir.</p>
            
            <div class="global-vars">
                <p><strong>Global Değişkenler/Sabitler:</strong></p>
                <p><code>window.DEBUG_LOG = true;</code>: Loglamanın aktif olup olmadığını kontrol eden global bir bayraktır. <code>false</code> yapılırsa <code>log</code> fonksiyonu hiçbir mesaj basmaz.</p>
                <p><code>const LOG_LEVELS = ['debug', 'info', 'action', 'warn', 'error'];</code>: Geçerli log seviyelerini tanımlayan bir dizidir.</p>
            </div>

            <h4 class="text-lg font-semibold text-gray-700 mt-4">Fonksiyon: <code>log(level, msg, ...args)</code></h4>
            <div class="code-block">
function log(level, msg, ...args) {
    if (!window.DEBUG_LOG) return; 
    if (!LOG_LEVELS.includes(level)) level = 'info'; 
    const ts = new Date().toISOString().substr(11, 8); 
    const colorMap = { 
        debug: 'color:#888',
        info: 'color:#2196F3',
        action: 'color:#4CAF50',
        warn: 'color:#FFC107',
        error: 'color:#F44336',
    };
    const style = colorMap[level] || ''; 
    console.log(`%c[${ts}] [${level.toUpperCase()}] ${msg}`, style, ...args);
}
            </div>
            <details class="mt-2">
                <summary class="explanation-summary">
                    <span>Komut Açıklamaları</span>
                    <span class="chevron"></span>
                </summary>
                <div class="explanation-details">
                    <p><strong><code>if (!window.DEBUG_LOG) return;</code></strong>: Eğer <code>window.DEBUG_LOG</code> global değişkeni <code>false</code> (veya false gibi değerlendirilen bir değer) ise, loglama yapmadan fonksiyondan hemen çıkar. Bu, geliştirme sırasında log mesajlarını kolayca açıp kapatmak için bir kontrol noktasıdır.</p>
                    <p><strong><code>if (!LOG_LEVELS.includes(level)) level = 'info';</code></strong>: Fonksiyona parametre olarak gelen <code>level</code> (log seviyesi) değerinin, önceden tanımlanmış <code>LOG_LEVELS</code> dizisi içinde olup olmadığını kontrol eder. Eğer belirtilen seviye bu dizide yoksa, varsayılan log seviyesi olarak <code>'info'</code> atanır.</p>
                    <p><strong><code>const ts = new Date().toISOString().substr(11, 8);</code></strong>: O anki zaman bilgisini alır (<code>new Date()</code>), ISO 8601 formatına (örneğin, "2023-10-27T10:30:00.000Z") çevirir (<code>.toISOString()</code>) ve bu string ifadenin 11. karakterinden başlayarak 8 karakterlik kısmını (yani "HH:MM:SS" formatındaki saat bilgisini, örn: "10:30:00") alır (<code>.substr(11, 8)</code>).</p>
                    <p><strong><code>const colorMap = { ... };</code></strong>: Farklı log seviyeleri için konsolda kullanılacak CSS renk kodlarını içeren bir objedir. Örneğin, 'error' seviyesi için kırmızı (<code>'#F44336'</code>) renk tanımlanmıştır.</p>
                    <p><strong><code>const style = colorMap[level] || '';</code></strong>: Mevcut <code>level</code> (log seviyesi) için <code>colorMap</code> objesinden ilgili renk stilini alır. Eğer belirtilen seviye için <code>colorMap</code>'te bir renk tanımlanmamışsa, varsayılan olarak boş bir string (<code>''</code>) atanır, bu da özel bir renk uygulanmayacağı anlamına gelir.</p>
                    <p><strong><code>console.log(\`%c[${ts}] [${level.toUpperCase()}] ${msg}\`, style, ...args);</code></strong>: Hazırlanan log mesajını tarayıcı konsoluna basar.
                        <ul>
                            <li><strong><code>%c</code></strong>: Bu özel belirteç, konsol çıktısının bir sonraki string argümanla (<code>style</code>) biçimlendirilmesini sağlar.</li>
                            <li><strong><code>[${ts}]</code></strong>: Zaman damgasını (önceki adımda elde edilen saat bilgisi) mesaja ekler.</li>
                            <li><strong><code>[${level.toUpperCase()}]</code></strong>: Log seviyesini büyük harflerle (örn: "INFO", "ERROR") mesaja ekler.</li>
                            <li><strong><code>${msg}</code></strong>: Fonksiyona parametre olarak gelen ana log mesajını (<code>msg</code>) ekler.</li>
                            <li><strong><code>style</code></strong>: <code>%c</code> belirteci ile ilişkilendirilen CSS stilini (rengi) uygular.</li>
                            <li><strong><code>...args</code></strong>: Eğer fonksiyona <code>msg</code>'den sonra ek argümanlar verilmişse (<code>...args</code> ile toplanır), bu argümanlar da konsola basılır. Bu, objelerin veya diğer değişkenlerin detaylarını loglamak için kullanışlıdır.</li>
                        </ul>
                    </p>
                </div>
            </details>
        </section>

        <section class="function-section" id="state-management">
            <h3 class="text-xl function-title-text mb-3">1.2 Durum Yönetimi (State Management)</h3>
            <p class="text-gray-600 mb-4">Bu kısım, <code>ChatManager</code> modülünün ve potansiyel olarak tüm uygulamanın genel durumunu (state) yönetmek için kullanılan değişkenlerin ve mantığın başlangıç yapılandırmasını içerir. Sohbet pencereleri, sohbet geçmişi gibi veriler burada tutulur.</p>
            
            <div class="code-block">
// (ChatManager IIFE içinde)
const state = {
    chats: [],         // Aktif sohbet pencereleri
    chatHistory: [],   // Mesaj içeren kapatılmış sohbetler
    maxChats: 6        // Maksimum eşzamanlı sohbet penceresi sayısı
};

// Global durumu başlat veya mevcut olanı kullan
if (window.state) { 
    if (!window.state.chats) window.state.chats = state.chats; 
    if (!window.state.chatHistory) window.state.chatHistory = state.chatHistory; 
    if (!window.state.aiTypes) window.state.aiTypes = []; 
} else {
    window.state = { 
        chats: state.chats,
        chatHistory: state.chatHistory,
        aiTypes: [] // index.html tarafından doldurulacak
    };
}
            </div>
            <details class="mt-2">
                <summary class="explanation-summary">
                    <span>Komut Açıklamaları</span>
                    <span class="chevron"></span>
                </summary>
                <div class="explanation-details">
                    <p><strong><code>const state = { ... };</code></strong>: <code>ChatManager</code> modülünün kendi içinde kullanacağı yerel (private) durum (state) değişkenlerini tanımlar.</p>
                    <ul>
                        <li><strong><code>chats: []</code></strong>: Aktif olan sohbet pencerelerinin bilgilerini tutacak bir dizi. Her bir sohbet penceresi genellikle bir obje olarak temsil edilir.</li>
                        <li><strong><code>chatHistory: []</code></strong>: Kullanıcı tarafından kapatılmış ve içerisinde mesajlaşma geçmişi bulunan sohbetlerin saklanacağı bir dizi.</li>
                        <li><strong><code>maxChats: 6</code></strong>: Kullanıcının aynı anda en fazla kaç tane sohbet penceresi açabileceğini belirleyen bir sayı.</li>
                    </ul>
                    <p><strong><code>if (window.state) { ... }</code></strong>: Tarayıcının global <code>window</code> objesinde <code>state</code> adında bir özellik (yani global bir durum objesi) olup olmadığını kontrol eder. Bu, uygulamanın farklı bölümleri arasında paylaşılan bir durum yönetimi olup olmadığını anlamak içindir.</p>
                    <p><strong><code>if (!window.state.chats) window.state.chats = state.chats;</code></strong>: Eğer global <code>window.state</code> objesi varsa ama içinde <code>chats</code> özelliği tanımlı değilse, <code>ChatManager</code>'ın kendi yerel <code>state.chats</code> dizisini global <code>window.state.chats</code>'e atar. Bu, global durumun bu modülün beklediği yapıda olmasını sağlar.</p>
                    <p><strong><code>if (!window.state.chatHistory) window.state.chatHistory = state.chatHistory;</code></strong>: Benzer şekilde, eğer global <code>window.state</code> objesi varsa ama içinde <code>chatHistory</code> özelliği tanımlı değilse, <code>ChatManager</code>'ın kendi yerel <code>state.chatHistory</code> dizisini global <code>window.state.chatHistory</code>'ye atar.</p>
                    <p><strong><code>if (!window.state.aiTypes) window.state.aiTypes = [];</code></strong>: Eğer global <code>window.state</code> objesi varsa ama içinde <code>aiTypes</code> (yapay zeka modellerinin tiplerini veya bilgilerini içermesi beklenen bir dizi) özelliği tanımlı değilse, bu özelliği boş bir dizi olarak başlatır. Yorumda belirtildiği gibi, bu dizinin içeriği muhtemelen <code>index.html</code> veya başka bir başlangıç script'i tarafından doldurulacaktır.</p>
                    <p><strong><code>else { window.state = { ... }; }</code></strong>: Eğer global <code>window</code> objesinde <code>state</code> adında bir özellik hiç yoksa (yani daha önce bir global durum oluşturulmamışsa), bu blok çalışır.</p>
                    <ul>
                        <li><strong><code>window.state = { ... }</code></strong>: Yeni bir global durum objesi (<code>window.state</code>) oluşturur ve bunu <code>ChatManager</code>'ın yerel <code>state</code> objesindeki <code>chats</code> ve <code>chatHistory</code> dizileriyle ve boş bir <code>aiTypes</code> dizisiyle başlatır. Bu, uygulamanın genelinde erişilebilir ve kullanılabilir bir merkezi durum yönetimi oluşturur.</li>
                    </ul>
                </div>
            </details>
        </section>

        <section class="function-section" id="dom-elements">
            <h3 class="text-xl function-title-text mb-3">1.3 DOM Elemanları (DOM Elements)</h3>
            <p class="text-gray-600 mb-4">Bu bölüm, JavaScript kodunun etkileşimde bulunacağı HTML elemanlarına referansların alınmasını ve saklanmasını yönetir. <code>initElements</code> fonksiyonu bu işlevi yerine getirir.</p>
            
            <div class="global-vars">
                 <p><strong>Modül İçi Değişken:</strong></p>
                 <p><code>let elements = {};</code>: <code>ChatManager</code> modülü kapsamında, HTML DOM elemanlarına referansları saklamak için kullanılacak boş bir objedir. Bu obje, <code>initElements</code> fonksiyonu tarafından doldurulur.</p>
            </div>

            <h4 class="text-lg font-semibold text-gray-700 mt-4">Fonksiyon: <code>initElements()</code></h4>
            <div class="code-block">
// (ChatManager IIFE içinde)
let elements = {}; 

function initElements() {
    elements = {
        // Ana kapsayıcı
        chatContainer: document.getElementById('chat-container'),
        welcomeScreen: document.getElementById('welcome-screen'),
        
        // Kontrol butonları
        welcomeNewChatBtn: document.getElementById('welcome-new-chat-btn'),
        newChatBtn: document.getElementById('new-chat-btn'),
        clearChatsBtn: document.getElementById('clear-chats-btn'),
        
        // Aktif sohbetler açılır menüsü
        activeChatsDropdownTrigger: document.getElementById('active-chats-dropdown-trigger'),
        activeChatsDropdownMenu: document.getElementById('active-chats-dropdown-menu'),
        activeChatsList: document.getElementById('active-chats-list'),
        
        // Yayın mesajı işlevselliği
        broadcastMessageInput: document.getElementById('broadcast-message-input'),
        sendBroadcastBtn: document.getElementById('send-broadcast-btn'),
        
        // Sohbet geçmişi
        chatHistoryTrigger: document.getElementById('chat-history-trigger'),
        chatHistoryMenu: document.getElementById('chat-history-menu'),
        chatHistoryList: document.getElementById('chat-history-list'),
    };

    if (!elements.chatContainer) { 
        log('error', 'Chat container element not found');
        return false; 
    }
    
    return true; 
}
            </div>
            <details class="mt-2">
                <summary class="explanation-summary">
                    <span>Komut Açıklamaları</span>
                    <span class="chevron"></span>
                </summary>
                <div class="explanation-details">
                    <p><strong><code>elements = { ... };</code></strong>: Modül kapsamında tanımlanmış olan <code>elements</code> objesini, HTML sayfasındaki çeşitli DOM elemanlarına yapılan referanslarla doldurur. Her bir özellik adı (örn: <code>chatContainer</code>), bir DOM elemanını temsil eder.</p>
                    <ul>
                        <li><strong><code>chatContainer: document.getElementById('chat-container')</code></strong>: HTML'de <code>id="chat-container"</code> niteliğine sahip olan elemanı bulur ve bu elemanın referansını <code>elements.chatContainer</code> özelliğine atar. Bu, genellikle tüm sohbet pencerelerinin yerleştirileceği ana kapsayıcıdır.</li>
                        <li><strong><code>welcomeScreen: document.getElementById('welcome-screen')</code></strong>: <code>id="welcome-screen"</code> olan elemanı seçer. Bu, aktif sohbet olmadığında gösterilen karşılama ekranıdır.</li>
                        <li>Diğer elemanlar (<code>welcomeNewChatBtn</code>, <code>newChatBtn</code>, <code>clearChatsBtn</code>, vb.) da benzer şekilde <code>document.getElementById()</code> metodu kullanılarak kendi ID'leri aracılığıyla seçilir ve <code>elements</code> objesine atanır. Bu, kodun ilerleyen kısımlarında bu elemanlara kolayca erişilmesini sağlar.</li>
                    </ul>
                    <p><strong><code>if (!elements.chatContainer) { ... }</code></strong>: <code>elements</code> objesine atanan <code>chatContainer</code> elemanının gerçekten bulunup bulunmadığını kontrol eder. Eğer <code>document.getElementById('chat-container')</code> bir eleman bulamazsa, <code>elements.chatContainer</code> değeri <code>null</code> olur ve bu koşul doğru (true) olarak değerlendirilir.</p>
                    <p><strong><code>log('error', 'Chat container element not found');</code></strong>: Eğer <code>chatContainer</code> elemanı bulunamazsa, bu kritik bir hata olduğu için konsola bir hata mesajı yazar.</p>
                    <p><strong><code>return false;</code></strong>: <code>chatContainer</code> bulunamadığı durumda, fonksiyon <code>false</code> değerini döndürerek DOM elemanlarının başlatılmasının başarısız olduğunu belirtir. Bu, genellikle ana başlatma (<code>init</code>) fonksiyonunun devam etmesini engeller.</p>
                    <p><strong><code>return true;</code></strong>: Eğer <code>chatContainer</code> (ve varsayılan olarak diğer elemanların da bulunduğu varsayılır, ancak sadece <code>chatContainer</code> özellikle kontrol edilir) başarıyla bulunduysa, fonksiyon <code>true</code> değerini döndürerek DOM elemanlarının başarıyla referanslandığını belirtir.</p>
                </div>
            </details>
        </section>

        <section class="function-section" id="initialization">
            <h3 class="text-xl function-title-text mb-3">1.4 Başlatma (Initialization)</h3>
            <p class="text-gray-600 mb-4"><code>ChatManager</code> modülünün genel başlatma (initialization) işlemini gerçekleştiren <code>init()</code> fonksiyonudur. Bu fonksiyon, modülün çalışması için gerekli tüm ön hazırlıkları yapar: DOM elemanlarını yükler, global olay dinleyicilerini ayarlar ve kullanıcı arayüzünü ilk durumuna getirir.</p>
            
            <h4 class="text-lg font-semibold text-gray-700 mt-4">Fonksiyon: <code>init()</code> (ChatManager Public API)</h4>
            <div class="code-block">
// (ChatManager IIFE içinde, public API olarak döndürülür)
function init() {
    log('info', 'Initializing ChatManager');
    
    if (!initElements()) { 
        log('error', 'Failed to initialize ChatManager: required elements not found');
        return; 
    }
    
    setupGlobalHandlers(); 

    // YENİ: AI Model seçici öğelerine olay dinleyicileri ekle
    const aiModelSelectorItems = document.querySelectorAll('.ai-model-selector-item'); 
    aiModelSelectorItems.forEach(item => { 
        item.addEventListener('click', function(event) { 
            event.preventDefault(); 
            const modelId = this.dataset.aiIndex; 
            if (modelId) { 
                ChatManager.addChat(modelId); 
                
                // 'active' sınıfını yönet
                aiModelSelectorItems.forEach(i => i.classList.remove('active')); 
                this.classList.add('active'); 
            } else {
                log('error', 'Invalid AI model ID selected from sidebar.', this.dataset.aiIndex); 
            }
        });
    });
    
    renderChats(); 
    renderActiveChatsDropdown(); 
    renderChatHistory(); 
    log('info', 'ChatManager initialized successfully');
}
            </div>
            <details class="mt-2">
                <summary class="explanation-summary">
                    <span>Komut Açıklamaları</span>
                    <span class="chevron"></span>
                </summary>
                <div class="explanation-details">
                    <p><strong><code>log('info', 'Initializing ChatManager');</code></strong>: <code>ChatManager</code>'ın başlatılma sürecinin başladığını konsola bir bilgi mesajı olarak yazar.</p>
                    <p><strong><code>if (!initElements()) { ... }</code></strong>: Daha önce tanımlanan <code>initElements()</code> fonksiyonunu çağırır. Bu fonksiyon, gerekli DOM elemanlarını bulup <code>elements</code> objesine atar.</p>
                    <p><strong><code>log('error', ...); return;</code></strong>: Eğer <code>initElements()</code> fonksiyonu <code>false</code> dönerse (yani kritik DOM elemanları bulunamazsa), konsola bir hata mesajı yazar ve <code>init</code> fonksiyonundan çıkarak başlatma işlemini durdurur.</p>
                    <p><strong><code>setupGlobalHandlers();</code></strong>: Uygulamanın genelinde kullanılacak olay dinleyicilerini (event listeners) ayarlayan <code>setupGlobalHandlers</code> fonksiyonunu çağırır. (Bu fonksiyonun detayları "Çekirdek Sistem" dışında olduğu için burada açıklanmamıştır, ancak genellikle "Yeni Sohbet", "Sohbetleri Temizle" gibi genel butonların işlevlerini bağlar.)</p>
                    <p><strong><code>const aiModelSelectorItems = document.querySelectorAll('.ai-model-selector-item');</code></strong>: HTML'de <code>class="ai-model-selector-item"</code> niteliğine sahip tüm DOM elemanlarını seçer. Bunlar genellikle kenar çubuğunda (sidebar) bulunan ve tıklandığında belirli bir yapay zeka modeliyle yeni bir sohbet başlatan öğelerdir.</p>
                    <p><strong><code>aiModelSelectorItems.forEach(item => { ... });</code></strong>: Bulunan her bir <code>ai-model-selector-item</code> için bir döngü başlatır ve her birine bir olay dinleyicisi ekler.</p>
                    <p><strong><code>item.addEventListener('click', function(event) { ... });</code></strong>: Her bir model seçici öğesine (<code>item</code>) bir 'click' (tıklama) olayı dinleyicisi atar. Kullanıcı bu öğelerden birine tıkladığında bu fonksiyon çalışır.</p>
                    <ul>
                        <li><strong><code>event.preventDefault();</code></strong>: Tıklama olayının varsayılan tarayıcı davranışını (örneğin, bir bağlantıysa sayfayı yönlendirmesini) engeller.</li>
                        <li><strong><code>const modelId = this.dataset.aiIndex;</code></strong>: Tıklanan öğenin (<code>this</code>) <code>data-ai-index</code> (HTML'de <code>data-ai-index="model_id_degeri"</code> şeklinde tanımlanmış) özel veri (dataset) niteliğinden yapay zeka modelinin ID'sini alır.</li>
                        <li><strong><code>if (modelId) { ... }</code></strong>: Alınan <code>modelId</code> değerinin geçerli (boş veya tanımsız değil) olup olmadığını kontrol eder.</li>
                        <ul>
                            <li><strong><code>ChatManager.addChat(modelId);</code></strong>: Eğer <code>modelId</code> geçerliyse, bu ID'yi kullanarak yeni bir sohbet penceresi oluşturmak için <code>ChatManager.addChat()</code> fonksiyonunu çağırır.</li>
                            <li><strong><code>aiModelSelectorItems.forEach(i => i.classList.remove('active'));</code></strong>: Tüm model seçici öğelerinden <code>'active'</code> CSS sınıfını kaldırır. Bu, daha önce seçilmiş olabilecek başka bir modelin vurgusunu kaldırmak içindir.</li>
                            <li><strong><code>this.classList.add('active');</code></strong>: O anda tıklanan model seçici öğesine <code>'active'</code> CSS sınıfını ekleyerek onu görsel olarak aktif/seçili hale getirir.</li>
                        </ul>
                        <li><strong><code>else { log('error', ...); }</code></strong>: Eğer tıklanan öğeden geçerli bir <code>modelId</code> alınamazsa, konsola bir hata mesajı yazar.</li>
                    </ul>
                    <p><strong><code>renderChats();</code></strong>: Mevcut aktif sohbet pencerelerini kullanıcı arayüzünde görüntülemek/güncellemek için <code>renderChats</code> fonksiyonunu çağırır.</p>
                    <p><strong><code>renderActiveChatsDropdown();</code></strong>: Kenar çubuğunda bulunan "Aktif Sohbetler" açılır menüsünün içeriğini güncellemek için <code>renderActiveChatsDropdown</code> fonksiyonunu çağırır.</p>
                    <p><strong><code>renderChatHistory();</code></strong>: Kenar çubuğunda bulunan "Sohbet Geçmişi" listesini güncellemek için <code>renderChatHistory</code> fonksiyonunu çağırır.</p>
                    <p><strong><code>log('info', 'ChatManager initialized successfully');</code></strong>: Tüm başlatma adımları başarıyla tamamlandıysa, konsola <code>ChatManager</code>'ın başarıyla başlatıldığına dair bir bilgi mesajı yazar.</p>
                </div>
            </details>
        </section>

    </div>
    <script>
        // Basit bir chevron toggle script'i, eğer CSS :open selector'u yeterli değilse
        // Ancak modern tarayıcılar için CSS yeterli olmalı.
        // document.querySelectorAll('details').forEach((detail) => {
        //     detail.addEventListener('toggle', () => {
        //         const summary = detail.querySelector('summary');
        //         // Chevron'u yönetmek için ek mantık eklenebilir, ancak CSS ile halledildi.
        //     });
        // });
    </script>
</body>
</html>
