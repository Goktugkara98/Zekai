<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zekai</title>
    
    <!-- Bruno Ace SC Font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bruno+Ace+SC&display=swap" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Chat Styles -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/chat/chat.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/chat/sidebar.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/chat/chat-panes.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/chat/input-bar.css') }}">
</head>
<body>
<div class="chat-container">
    <!-- Sidebar -->
    <aside class="chat-sidebar">
        <!-- Logo Section -->
        <div class="sidebar-logo">
            <span class="logo-text">zekai</span>
        </div>

        <!-- Scrollable Content -->
        <div class="sidebar-content">
            <!-- Primary Section -->
            <div class="sidebar-section">
                <div class="section-title" data-i18n="primary">PRIMARY</div>
                <div class="sidebar-item active">
                    <i class="fas fa-comments"></i>
                    <span data-i18n="chat_mode">Sohbet Modu</span>
                </div>
                <div class="sidebar-item locked" title="Yakında" data-i18n="coming_soon" data-i18n-attr="title">
                    <i class="fas fa-robot"></i>
                    <span data-i18n="agent_mode">Agent Modu</span>
                    <span class="item-meta locked"><i class="fas fa-lock"></i> <span data-i18n="locked">Kilitli</span></span>
                </div>
            </div>

        <!-- Favorite Models Section -->
        <div class="sidebar-section">
            <div class="section-header" data-target="favorite-models">
                <div class="section-title" data-i18n="favorite_models">FAVORİ MODELLER</div>
                <i class="fas fa-chevron-down collapse-icon"></i>
            </div>
            <div class="collapsible-content" id="favorite-models">
                <div class="model-list" id="favorite-model-list">
                    <!-- Favorite models will be listed here -->
                </div>
            </div>
        </div>

        <!-- All Models Section -->
        <div class="sidebar-section">
            <div class="section-header" data-target="all-models">
                <div class="section-title" data-i18n="all_models">TÜM MODELLER</div>
                <i class="fas fa-chevron-down collapse-icon"></i>
            </div>
            <div class="collapsible-content" id="all-models">
                <div class="model-list" id="all-model-list">
                    <!-- All models will be loaded dynamically from database -->
                </div>
            </div>
        </div>

        <!-- Categories Section -->
        <div class="sidebar-section">
            <div class="section-header" data-target="categories">
                <div class="section-title" data-i18n="categories">CATEGORIES</div>
                <i class="fas fa-chevron-down collapse-icon"></i>
            </div>
            <div class="collapsible-content" id="categories">
                <div class="category-list"></div>
            </div>
        </div>

        <!-- Active Chats Section -->
        <div class="sidebar-section">
            <div class="section-header" data-target="active-chats">
                <div class="section-title" data-i18n="active_chats">ACTIVE CHATS</div>
                <i class="fas fa-chevron-down collapse-icon"></i>
            </div>
            <div class="collapsible-content" id="active-chats">
                <div class="chat-list" id="active-chat-list">
                    <!-- Active chats will be loaded dynamically -->
                </div>
            </div>
        </div>

        <!-- Chat History Section -->
        <div class="sidebar-section">
            <div class="section-header" data-target="chat-history">
                <div class="section-title" data-i18n="chat_history">CHAT HISTORY</div>
                <i class="fas fa-chevron-down collapse-icon"></i>
            </div>
            <div class="collapsible-content" id="chat-history">
                <div class="history-list" id="history-list">
                    <!-- Chat history will be loaded dynamically -->
                </div>
            </div>
        </div>

        </div>

        <!-- Profile Card (replaces bottom links) -->
        <div class="sidebar-bottom">
            <div class="profile-card">
                <div class="profile-header" role="button" title="Profil ve Ayarlar" data-i18n="profile_settings" data-i18n-attr="title">
                    <div class="profile-avatar" id="profile-avatar">ZU</div>
                    <div class="profile-info">
                        <div class="profile-name" id="profile-name">{{ user_name or 'Zekai User' }}</div>
                        <div class="profile-email" id="profile-email">{{ user_email or 'user@example.com' }}</div>
                    </div>
                    <div class="profile-toggle">
                        <i class="fas fa-chevron-up"></i>
                    </div>
                </div>
                <div class="profile-settings">
                    <div class="setting-item">
                        <div class="setting-label"><i class="fas fa-moon"></i><span data-i18n="label_dark_mode">Karanlık Mod</span></div>
                        <label class="switch">
                            <input type="checkbox" id="toggle-darkmode">
                            <span class="slider"></span>
                        </label>
                    </div>
                    <div class="setting-item">
                        <div class="setting-label"><i class="fas fa-bell"></i><span data-i18n="label_notifications">Bildirimler</span></div>
                        <label class="switch">
                            <input type="checkbox" id="toggle-notifications">
                            <span class="slider"></span>
                        </label>
                    </div>
                    <div class="setting-item">
                        <div class="setting-label"><i class="fas fa-language"></i><span data-i18n="label_language">Dil</span></div>
                        <select id="select-language" class="setting-select">
                            <option value="tr">Türkçe</option>
                            <option value="en">English</option>
                        </select>
                    </div>
                    <button class="logout-btn" id="btn-logout"><i class="fas fa-sign-out-alt"></i><span data-i18n="logout">Çıkış Yap</span></button>
                </div>
            </div>
        </div>
    </aside>

    <!-- Main Chat Area -->
    <main class="chat-main">
        <!-- Chat Panes Container -->
        <div class="chat-panes-container">
            <!-- Empty State -->
            <div class="empty-chat-state">
                <h2>zekai</h2>
                <p data-i18n="app_welcome_desc">Select a model from the sidebar to start chatting</p>
            </div>
        </div>
    </main>

    <!-- Input Bar -->
    <div class="input-bar">
        <div class="input-container">
            <textarea 
                class="message-input" 
                data-i18n="message_placeholder" data-i18n-attr="placeholder" placeholder="Sorunuzu ya da isteğinizi buraya yazın; gönderdiğinizde uygun model önerileri gelir veya seçtiğiniz modelle sohbet başlar."
                rows="1"
            ></textarea>
        </div>

        <div class="input-actions">
            <button class="action-btn prompts-btn">
                <i class="fas fa-lightbulb"></i>
                <span data-i18n="prompts">Prompts</span>
            </button>
            <button class="action-btn send-btn">
                <i class="fas fa-paper-plane"></i>
                <span data-i18n="send">Send</span>
            </button>
        </div>
    </div>
</div>

<!-- Markdown Libraries -->
<script src="https://cdn.jsdelivr.net/npm/dompurify@2.5.4/dist/purify.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

<!-- Chat App -->
<script type="module" src="{{ url_for('static', filename='js/chat/chat-new.js') }}"></script>
</body>
</html>
